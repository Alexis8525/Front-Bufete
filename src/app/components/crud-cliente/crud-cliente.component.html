<div class="wrapper">
    <app-barra-lateral></app-barra-lateral>
    <div class="main">
        <nav class="navbar navbar-expand-lg p-0" style="background-color: #001f3f;">
            <div class="container-fluid p-0">
                <a class="navbar-brand" href="/home">
                    <img src="logo/logoLexVargasV.png" alt="LexVargas Logo" width="200" class="d-inline-block align-text-top">
                </a>
            </div>
        </nav>
        
        <div class="p-3">
            <app-breadcrumbs></app-breadcrumbs>

            <div class="cuerpo">
                <div class="row mb-4 align-items-center">
                    <div class="col-md-8">
                        <h2 class="titulo-clientes">Clientes</h2>
                    </div>
                    <div class="col-md-4 text-end">
                        <button type="button" class="btn btn-success" (click)="abrirModalNuevoCliente()">Nuevo Cliente</button>
                    </div>
                </div>

                <!-- Filtros -->
                <div class="filtros-container filtros">
                    <h3>Filtros de Clientes</h3>
                    <div class="filtros-content">
                        <div class="form-group">
                            <label for="filtroNombre">Nombre del Cliente:</label>
                            <input type="text" id="filtroNombre" class="form-control filtro-input" [(ngModel)]="filtroNombre" (input)="filtrarClientes()" placeholder="Buscar por nombre...">
                        </div>
                        <div class="form-group">
                            <label for="filtroCorreo">Correo del Cliente:</label>
                            <input type="text" id="filtroCorreo" class="form-control filtro-input" [(ngModel)]="filtroCorreo" (input)="filtrarClientes()" placeholder="Buscar por correo...">
                        </div>
                        <div class="form-group">
                            <label for="filtroTelefono">Teléfono del Cliente:</label>
                            <input type="text" id="filtroTelefono" class="form-control filtro-input" [(ngModel)]="filtroTelefono" (input)="filtrarClientes()" placeholder="Buscar por teléfono...">
                        </div>
                    </div>
                </div>

                <!-- Lista de Clientes -->
                <div class="row">
                    <div class="col-md-3" *ngFor="let itemC of clientesFiltrados">
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <h5 class="card-title">
                                    <strong>{{ itemC.nombreCliente }}</strong>
                                </h5>
                                <h5 class="card-title">
                                    <strong>{{ itemC.aPCliente }} {{ itemC.aMCliente }}</strong>
                                </h5>
                                <p class="card-text">
                                    <strong>Correo:</strong> {{ itemC.correo }}<br>
                                    <strong>Teléfono:</strong> {{ itemC.telefono }}<br>
                                    <strong>Dirección:</strong> {{ itemC.direccion || 'N/A' }}<br>
                                </p>
                                <button type="button" class="btn btn-primary" (click)="abrirModalEditar(itemC)">Editar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal de Nuevo Cliente -->
                <app-nuevo-cliente
                    *ngIf="modalNuevoVisible"
                    (crear)="crearCliente($event)"
                    (cerrarModal)="cerrarModalNuevoCliente()">
                </app-nuevo-cliente>

                <!-- Modal de Editar Cliente -->
                <app-editar-cliente
                    *ngIf="modalEditarVisible && clienteSeleccionado"
                    [cliente]="clienteSeleccionado"
                    (clienteActualizado)="onClienteActualizado()"
                    (cerrarModal)="cerrarModalEditar()">
                </app-editar-cliente>
            </div>
        </div>
    </div>
</div>
