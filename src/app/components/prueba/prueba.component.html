<div class="wrapper">
  <app-barra-lateral></app-barra-lateral>

  <div class="main">
    <nav class="navbar navbar-expand-lg p-0" style="background-color: #001f3f;">
      <div class="container-fluid p-0">
        <a class="navbar-brand" href="#">
          <img src="logo/logoLexVargasV.png" alt="LexVargas Logo" width="200" class="d-inline-block align-text-top">
        </a>
      </div>
    </nav>

    <div class="p-3">
      <div class="calendario">
        <div class="header">
          <button (click)="cambiarMes(-1)">Anterior</button>
          <h2>{{ nombreMesActual }} {{ anioActual }}</h2>
          <button (click)="cambiarMes(1)">Siguiente</button>
        </div>
        <table>
          <thead>
            <tr>
              <th *ngFor="let dia of nombresDias">{{ dia }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let fila of [0, 1, 2, 3, 4, 5]">
              <td *ngFor="let dia of diasDelMes.slice(fila * 7, fila * 7 + 7); let diaSemana = index" 
                  [ngClass]="{
                    'verde': obtenerColorDia(dia, diaSemana) === 'verde',
                    'amarillo': obtenerColorDia(dia, diaSemana) === 'amarillo',
                    'rojo': obtenerColorDia(dia, diaSemana) === 'rojo',
                    'gris': obtenerColorDia(dia, diaSemana) === 'gris'
                  }"
                  (click)="seleccionarDia(dia)">
                {{ dia !== 0 ? dia : '' }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Tabla de explicación de los colores -->
      <div class="tabla-explicativa">
        <h4>Explicación de los colores:</h4>
        <table class="table">
          <thead>
            <tr>
              <th>Color</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="verde">Alta disponibilidad</td>
              <td>Días con mucha disponibilidad de citas.</td>
            </tr>
            <tr>
              <td class="amarillo">Poca disponibilidad</td>
              <td>Días con disponibilidad limitada de citas.</td>
            </tr>
            <tr>
              <td class="rojo">Sin disponibilidad</td>
              <td>Días sin disponibilidad de citas.</td>
            </tr>
            <tr>
              <td class="gris">Día sin servicio</td>
              <td>Días en los que no se trabaja (Ejemplo: Domingo).</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Si hay un día seleccionado, mostrar las horas disponibles en un select -->
      <div *ngIf="diaSeleccionado !== null">
        <h3>Selecciona una hora para el {{ diaSeleccionado }}:</h3>
        <select [(ngModel)]="horaSeleccionada" class="form-select">
          <option *ngFor="let hora of horasDelDiaSeleccionado" [value]="hora">{{ hora }}</option>
        </select>
        <button class="btn btn-secondary mt-3" (click)="deseleccionarDia()">Deseleccionar</button>
      </div>
    </div>
  </div>
</div>
