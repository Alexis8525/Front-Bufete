<div class="wrapper">
  <app-barra-lateral></app-barra-lateral>

  <div class="main">
    <nav class="navbar navbar-expand-lg" style="background-color: #001f3f;">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="logo/logoLexVargasV.png" alt="LexVargas Logo" width="200" class="d-inline-block align-text-top">
        </a>
      </div>
    </nav>

    <div class="p-3 container">
      <!-- Selección de Cliente -->
      <div class="form-group mb-4">
        <label for="cliente">Selecciona al Cliente:</label>
        <select [(ngModel)]="clienteSeleccionado" name="cliente" required class="form-control" (change)="cargarDatosCliente()">
          <option *ngFor="let cliente of clientes" [value]="cliente.idCliente">
            {{ cliente.nombreCliente }} {{ cliente.aPCliente }} {{ cliente.aMCliente }}
          </option>
        </select>
      </div>

      <!-- Datos del Cliente -->
      <div *ngIf="clienteDatos" class="section cliente-section">
        <h4>Datos del Cliente</h4>
        <div class="form-group">
          <label for="emailCliente">Correo Electrónico:</label>
          <input type="text" [(ngModel)]="clienteDatos.correo" readonly class="form-control">
        </div>
        <div class="form-group">
          <label for="telefonoCliente">Teléfono:</label>
          <input type="text" [(ngModel)]="clienteDatos.telefono" readonly class="form-control">
        </div>
        <div class="form-group">
          <label for="direccionCliente">Dirección:</label>
          <input type="text" [(ngModel)]="clienteDatos.direccion" readonly class="form-control">
        </div>
      </div>

      <!-- Selección de Abogado -->
      <div class="form-group mb-4">
        <label for="abogado">Selecciona al Abogado:</label>
        <select [(ngModel)]="AbogadoSeleccionado" name="abogado" required class="form-control" (change)="cargarDatosAbogado()">
          <option *ngFor="let abogado of Abogado" [value]="abogado.idEmpleado">
            {{ abogado.nombreEmpleado }} {{ abogado.aPEmpleado }} {{ abogado.aMEmpleado }}
          </option>
        </select>
      </div>

      <!-- Datos del Abogado -->
      <div *ngIf="AbogadoDatos" class="section abogado-section">
        <h4>Datos del Abogado</h4>
        <div class="form-group">
          <label for="telefonoAbogado">Teléfono:</label>
          <input type="text" [(ngModel)]="AbogadoDatos.telefono" readonly class="form-control">
        </div>
        <div class="form-group">
          <label for="correoAbogado">Correo Electrónico:</label>
          <input type="text" [(ngModel)]="AbogadoDatos.correo" readonly class="form-control">
        </div>
      </div>

      <!-- Formulario de Expediente -->
      <div class="section expediente-section">
        <h4>Datos del Expediente</h4>
        <form *ngIf="!idExpedienteCreado" (ngSubmit)="onSubmit()" class="form-container">
          <div class="form-group">
            <label for="nombre">Nombre del Expediente:</label>
            <input type="text" [(ngModel)]="expediente.nombreExpediente" name="nombre" required class="form-control">
          </div>
          <div class="form-group">
            <label for="numero">Número de Expediente:</label>
            <input type="text" [(ngModel)]="expediente.numeroExpediente" name="numero" required class="form-control">
          </div>
          <div class="form-group">
            <label for="descripcion">Descripción:</label>
            <textarea [(ngModel)]="expediente.descripcion" name="descripcion" class="form-control"></textarea>
          </div>
          <div class="form-group">
            <label for="estado">Estado:</label>
            <input type="text" [(ngModel)]="expediente.estado" name="estado" required class="form-control">
          </div>
          <div class="form-group">
            <label for="servicio">Nombre del Servicio:</label>
            <input type="text" [(ngModel)]="expediente.nombreServicio" name="servicio" required class="form-control">
          </div>
          <button type="submit" class="btn btn-primary btn-submit">Crear Expediente</button>
        </form>
      </div>
      <form *ngIf="idExpedienteCreado" (ngSubmit)="subirDocumentos()" class="form-container mt-4">
        <h3>Ahora agrega los documentos al expediente</h3>
        <div class="form-group">
          <label>Seleccione los documentos:</label>
          <div *ngFor="let documento of ['CURP', 'Curriculum Vitae', 'Comprobante de Domicilio', 'Número de Seguridad Social (IMSS)', 'Identificación Oficial']">
            <label for="{{documento}}">{{documento}}:</label>
            <input type="file" id="{{documento}}" (change)="onFileSelected($event, documento)" accept="application/pdf" class="form-control-file" required>
            <div *ngIf="archivos[documento]">
              <p>{{documento}} cargado.</p>
            </div>
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary btn-submit">Subir Documentos</button>
      </form>
    </div>
  </div>
</div>
